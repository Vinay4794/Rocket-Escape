/* =========================
   RESET
========================= */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:system-ui,Segoe UI,Arial,sans-serif;
}

/* =========================
   GLOBAL (Scrollable Mobile Fix)
========================= */
html, body{
  height:100%;
  margin:0;
  overflow-x:hidden;
  overflow-y:auto;          /* ✅ allow vertical scroll */
  color:#fff;
  background:#050513;
  touch-action: pan-y;      /* ✅ allow vertical scrolling gesture */
  user-select:none;
  -webkit-user-select:none;
}

/* Keep GAME touch locked (so swipe/hold works perfectly) */
#stageContainer, #game, canvas{
  touch-action: none;       /* ✅ no scroll inside game area */
}

canvas { touch-action:none; }

/* =========================
   BACKGROUND (premium neon)
========================= */
.bg{
  position:fixed;
  inset:0;
  z-index:-1;
  overflow:hidden;
  background:
    radial-gradient(1200px 700px at 20% 10%, rgba(70,120,255,.18), transparent 55%),
    radial-gradient(900px 520px at 85% 20%, rgba(35,210,200,.14), transparent 55%),
    radial-gradient(850px 520px at 60% 90%, rgba(255,80,190,.10), transparent 60%),
    linear-gradient(180deg,#060613,#040412);
}

.aurora{
  position:absolute;
  filter: blur(55px);
  opacity:.6;
  border-radius:999px;
  mix-blend-mode:screen;
  animation: aur 12s ease-in-out infinite;
}
.a1{width:700px;height:300px;left:-140px;top:120px;background:rgba(120,160,255,.33)}
.a2{width:680px;height:320px;right:-220px;top:180px;background:rgba(35,210,200,.25);animation-delay:2s}
.a3{width:740px;height:360px;left:35%;bottom:-260px;background:rgba(255,80,190,.20);animation-delay:4s}

@keyframes aur{
  0%,100%{transform:translate(0,0) scale(1)}
  50%{transform:translate(24px,-24px) scale(1.05)}
}

.noise{
  position:absolute;
  inset:0;
  opacity:.07;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
}

.grid{
  position:absolute;
  inset:0;
  opacity:.07;
  background-image:
    linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px);
  background-size:78px 78px;
  animation:gridmove 14s linear infinite;
}
@keyframes gridmove{
  from{transform:translateY(0)}
  to{transform:translateY(78px)}
}

/* =========================
   APP LAYOUT
========================= */
.app{
  width: 100vw;                /* ✅ full width */
  max-width: 100vw;            /* ✅ no limitation */
  margin: 0;
  padding: 14px;               /* keep premium padding */
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 12px;

  min-height: 100vh;
  height: auto;                /* ✅ scrollable */
}


/* =========================
   TOPBAR
========================= */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 6px 10px;
  border-radius:20px;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(16px);
  box-shadow: 0 18px 55px rgba(0,0,0,.55);
}

.brand{display:flex;align-items:center;gap:12px}
.logo{
  width:44px;height:44px;
  border-radius:16px;
  font-size:1.15rem;
  display:grid;
  place-items:center;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
}

.brandText h1{font-size:1.45rem;}
.brandText p{font-size:.88rem;margin-top:1px;opacity:.8}

.topRight{display:flex;align-items:center;gap:12px;flex-wrap:wrap}

/* Mode */
.modeBox{
  padding:10px 12px;
  border-radius:18px;
  background: rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.10);
}
.modeLabel{opacity:.7;font-size:.86rem;margin-bottom:6px}

.select{
  width:150px;
  border-radius:14px;
  padding:10px 12px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.14);
  color:#fff;
  font-weight:900;
  outline:none;
  cursor:pointer;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.08),
    0 10px 28px rgba(0,0,0,.35);
}
.select:hover{
  background: rgba(0,0,0,.65);
  border-color: rgba(255,255,255,.20);
}
.select:focus{
  border-color: rgba(35,210,200,.55);
  box-shadow:
    0 0 0 4px rgba(35,210,200,.12),
    inset 0 1px 0 rgba(255,255,255,.08);
}
.select option{background:#0b0f1d;color:#ffffff}

.iconBtn{
  width:48px;height:48px;border-radius:18px;
  border:none;cursor:pointer;
  color:#fff;font-size:1.1rem;font-weight:950;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  transition:.16s ease;
}
.iconBtn:hover{transform:translateY(-2px);background:rgba(255,255,255,.10)}
.iconBtn:active{transform:translateY(0)}

/* =========================
   RIBBON CONTROLS (used below game window on mobile)
========================= */
/* =========================
   IN-GAME RIBBON (Desktop + Mobile)
========================= */
/* =========================
   COMPACT IN-GAME RIBBON BOX
   - single line buttons
   - lower height
   - no wrapping
========================= */
/* =========================
   HUD RIBBON — SINGLE LINE
   Desktop: text + select
   Mobile: icons only
   Never wraps, never breaks layout
========================= */

.gameRibbonBox{
  position:absolute;
  left:50%;
  bottom:14px;
  transform:translateX(-50%);
  z-index:12;

  /* ✅ compact height */
  padding: 7px 10px;
  border-radius: 18px;

  background: rgba(0,0,0,.46);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  box-shadow: 0 22px 90px rgba(0,0,0,.65);

  display:flex;
  align-items:center;
  gap:10px;

  /* ✅ single line */
  white-space: nowrap;
  max-width: calc(100% - 20px);

  /* ✅ if too many items: horizontal scroll instead of wrap */
  overflow-x: auto;
  overflow-y: hidden;

  scrollbar-width: none; /* Firefox */
}
.gameRibbonBox::-webkit-scrollbar{ display:none; } /* Chrome/Safari */

.gameRibbonBox.hidden{ display:none; }

.grTitle{
  font-weight: 950;
  opacity:.9;
  font-size:.92rem;
  white-space: nowrap;
  margin-right: 2px;
}

/* ✅ one line buttons row */
.grBtns{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap: nowrap;
  white-space: nowrap;
}

/* ✅ compact button baseline */
.grBtn{
  height: 36px;                 /* ✅ reduced height */
  padding: 0 12px;
  border-radius: 14px;

  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);

  color:#fff;
  font-weight: 950;
  font-size: .88rem;
  line-height: 1;

  cursor:pointer;
  user-select: none;
  -webkit-user-select:none;
  -webkit-tap-highlight-color: transparent;

  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;

  transition: transform .14s ease, filter .14s ease, background .14s ease;
}

.grBtn:hover{ transform: translateY(-2px); }
.grBtn:active{ transform: translateY(0); filter: brightness(1.15); }

.grBtn.primary{
  border:none;
  background: linear-gradient(135deg, #4b7bff, #23d2c8);
  color:#061018;
  box-shadow: 0 14px 30px rgba(35,210,200,.14);
}

/* icons/text wrappers */
.grBtn .ico{
  font-size: 18px;
  font-weight: 900;
  line-height: 1;
}
.grBtn .txt{
  font-size: .88rem;
}

/* compact select (desktop) */
.grSelect{
  height: 36px;
  padding: 0 10px;
  border-radius: 14px;

  font-weight: 900;
  font-size: .88rem;

  color: rgba(255,255,255,.92);
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.14);

  outline: none;
  cursor: pointer;

  max-width: 190px;
}
.grSelect option{
  background:#0b0f1d;
  color:#fff;
}

/* =========================
   MOBILE: ICONS ONLY
========================= */
@media (max-width: 720px){

  .gameRibbonBox{
    bottom: 12px;
    padding: 6px 8px;
    border-radius: 16px;
    gap: 8px;
  }

  /* hide title to save space */
  .grTitle{
    display:none;
  }

  /* buttons become square icon pills */
  .grBtn{
    height: 40px;
    width: 44px;
    padding: 0;
    border-radius: 16px;
  }

  /* hide text, keep icons */
  .grBtn .txt{
    display:none;
  }

  /* skin select stays but smaller */
  .grSelect{
    height: 40px;
    max-width: 150px;
    font-size: .85rem;
  }
}

/* =========================
   MAIN GRID: Left | Game | Right
========================= */
.layout{
  display:grid;
  grid-template-columns: 260px 1fr 260px;
  gap:12px;
  min-height:0;
}

/* panels */
.panel{
  padding:14px;
  border-radius:26px;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(16px);
  box-shadow: 0 24px 85px rgba(0,0,0,.55);
  overflow:auto;
  max-height: calc(100vh - 110px);
}

.panelTitle{
  font-weight:950;
  font-size:1.05rem;
  opacity:.9;
  margin-bottom:10px;
}

.panel::-webkit-scrollbar{width:8px}
.panel::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12);border-radius:999px}

/* left stats */
.statGrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.statCard{
  padding:12px;
  border-radius:20px;
  background: rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.10);
  transition:.16s ease;
}
.statCard:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.16)}
.statCard .k{opacity:.72;font-size:.9rem}
.statCard .v{margin-top:6px;font-size:1.45rem;font-weight:950}
.statCard .v.small{font-size:1.05rem}

.block{
  margin-top:12px;
  padding:12px;
  border-radius:22px;
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
}

.blockHead{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:950}
.tag{
  font-size:.85rem;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  opacity:.9
}
.tag.hot{
  background: linear-gradient(135deg, rgba(255,80,190,.35), rgba(255,200,80,.10));
  border:1px solid rgba(255,255,255,.14)
}

.bar{
  height:10px;
  border-radius:999px;
  background:rgba(0,0,0,.26);
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
}
.barFill{
  height:100%;
  width:12%;
  border-radius:999px;
  background: linear-gradient(90deg, #4b7bff, #23d2c8);
  box-shadow:0 0 24px rgba(35,210,200,.25);
  transition:width .22s ease;
}

.muted{margin-top:8px;opacity:.7;font-size:.9rem}

.keyRow{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
.key{
  padding:8px 10px;border-radius:12px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  font-weight:950;
}
.keyDesc{opacity:.78}

/* =========================
   GAME CENTER
========================= */
.gameArea{
  min-width:0;
  display:grid;
  grid-template-rows: 1fr auto;
  gap:10px;
  min-height:0;
}

.stageWrap{
  position:relative;
  min-height:380px;
}

.stage{
  position:relative;
  height:65vh;
  min-height:380px;
  border-radius:30px;
  overflow:hidden;
  background: rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 40px 120px rgba(0,0,0,.65);
}

.stage::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: radial-gradient(900px 400px at 50% 0%, rgba(255,255,255,.12), transparent 60%);
}

canvas{
  width:100%;
  height:100%;
  display:block;
}

/* overlay */
.overlay{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  background: radial-gradient(720px 420px at 50% 45%, rgba(0,0,0,.08), rgba(0,0,0,.55));
  pointer-events:none;
}
.overlay.hidden{display:none}

.modal{
  width:min(560px,94%);
  padding:22px;
  border-radius:26px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(18px);
  box-shadow: 0 28px 110px rgba(0,0,0,.72);
}
.modal h2{font-size:1.75rem;font-weight:950}
.modal p{margin-top:8px;opacity:.85}
.miniNote{margin-top:10px;font-size:.92rem;opacity:.7}

/* =========================
   RIGHT PANEL (cards)
========================= */
.tipCard{
  padding:12px;
  border-radius:22px;
  background: linear-gradient(135deg, rgba(35,210,200,.10), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.12);
  margin-bottom:12px;
}

.tipTop{display:flex;gap:10px;align-items:center;margin-bottom:10px}
.dot{width:10px;height:10px;border-radius:50%;background:rgba(35,210,200,1);box-shadow:0 0 18px rgba(35,210,200,.45)}
.tipTitle{font-weight:950}
.tipText{opacity:.9;font-weight:700;line-height:1.4}

.chipGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.chip{
  padding:10px 10px;border-radius:16px;
  background: rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.10);
  transition:.16s ease;
}
.chip:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.16)}

.badgeRow{display:flex;gap:10px;flex-wrap:wrap}
.badge{
  font-weight:950;font-size:.9rem;
  padding:8px 11px;border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  opacity:.55;transition:.2s ease;
}
.badge.active{
  opacity:1;
  background: linear-gradient(135deg, rgba(75,123,255,.95), rgba(35,210,200,.95));
  color:#061018;border:none;
}

.bossCard{
  margin-top:12px;
  padding:14px;
  border-radius:24px;
  background: linear-gradient(135deg, rgba(255,80,190,.18), rgba(255,200,80,.05));
  border:1px solid rgba(255,255,255,.12);
}
.bossTitle{font-weight:950;margin-bottom:8px}
.bossText{opacity:.8;line-height:1.4}

/* =========================
   DRAWER
========================= */
.drawer{
  position:fixed; top:14px; right:14px;
  width:min(380px,92vw);
  height:calc(100vh - 28px);
  border-radius:28px;
  background:rgba(10,12,25,.78);
  border:1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(18px);
  box-shadow:0 45px 140px rgba(0,0,0,.72);
  padding:14px;
  overflow:auto;
}
.drawer.hidden{display:none}
.drawerHead{display:flex;justify-content:space-between;align-items:flex-start;padding:4px 2px 10px}
.drawerTitle{font-size:1.25rem;font-weight:950}
.drawerSub{opacity:.72;margin-top:4px;font-size:.92rem}
.drawerCard{margin-top:12px;padding:14px;border-radius:22px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10)}
.drawerCardTitle{font-weight:950;margin-bottom:10px}
.drawerGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.dstat{padding:10px 12px;border-radius:16px;background:rgba(0,0,0,.20);border:1px solid rgba(255,255,255,.08)}
.dstat .l{opacity:.75;font-size:.9rem}
.dstat .x{margin-top:6px;font-weight:950;font-size:1.1rem}
.drawerList{margin-top:6px;padding-left:18px;opacity:.86}
.drawerList li{margin:7px 0}

/* =========================
   RESPONSIVE
========================= */
@media (max-width: 1100px){
  .layout{grid-template-columns: 1fr}
  .panel{display:none}
}

/* MOBILE */
@media (max-width: 768px){
  .brandText p{ display:none; }
  .app{ padding: 10px 10px calc(14px + env(safe-area-inset-bottom)); }
  .modeBox{ padding: 8px 10px; }
  .select{ width: 128px; padding: 9px 10px; }

  .stageWrap{ height:auto; min-height:0; }
  .stage{ height:62vh; min-height:320px; border-radius:26px; }
}

/* Extra small phones */
@media (max-width: 520px){
  .brandText h1{ font-size: 1.15rem; }
  .iconBtn{ width: 44px; height: 44px; }
  .ribbonBtn{ padding: 10px 12px; font-size: .88rem; }
}

/* LAPTOP/DESKTOP big full height */
@media (min-width: 1101px){
  .app{ min-height: 100vh; height: 100vh; }
  .layout{ height: 100%; min-height: 0; }
  .gameArea{ height: 100%; min-height: 0; grid-template-rows: 1fr; }
  .stageWrap{ height: 100%; min-height: 0; }
  .stage{ height: 100%; min-height: 0; }
  .panel{ height: 100%; max-height: none; }
}

/* =========================
   IN-GAME RIBBON BOX
========================= */
.gameRibbonBox{
  position:absolute;
  left:50%;
  bottom:18px;
  transform:translateX(-50%);
  z-index:12;

  padding:12px 14px;
  border-radius:20px;
  background: rgba(0,0,0,.40);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(14px);
  box-shadow: 0 30px 110px rgba(0,0,0,.65);

  display:flex;
  align-items:center;
  gap:12px;
}

.grTitle{
  font-weight:950;
  opacity:.88;
  font-size:.95rem;
  white-space:nowrap;
}
.grBtns{ display:flex; gap:10px; }

.grBtn{
  border:none;
  cursor:pointer;
  padding:10px 14px;
  border-radius:14px;
  font-weight:950;
  font-size:.92rem;
  color:#fff;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  transition:.16s ease;
}

.grBtn:hover{ transform: translateY(-2px); }
.grBtn:active{ transform: translateY(0); }

.grBtn.primary{
  background: linear-gradient(135deg, #4b7bff, #23d2c8);
  color:#061018;
  border:none;
}

/* hide helper class */
.gameRibbonBox.hidden{ display:none; }

@media (max-width: 520px){
  .gameRibbonBox{ bottom:12px; padding:10px 12px; gap:10px; }
  .grTitle{ display:none; }
  .grBtn{ padding:10px 12px; }
}

/* =========================
   PREMIUM MOBILE BUTTONS (FINAL SINGLE SOURCE)
========================= */
#stageContainer{
  position: relative;
  width: 100%;
  height: 100%;
}

#game{
  width: 100%;
  height: 100%;
  display: block;
  border-radius: 22px;
}

/* base style for both buttons */
.mobileBtn{
  position: absolute;
  bottom: 14px;
  z-index: 1000;

  width: 72px;
  height: 72px;
  border-radius: 20px;

  border: 2px solid rgba(255, 255, 255, 0.22);
  background: rgba(0, 0, 0, 0.55);

  display: flex;
  align-items: center;
  justify-content: center;

  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  box-shadow:
    0 14px 30px rgba(0, 0, 0, 0.55),
    inset 0 0 0 1px rgba(255, 255, 255, 0.08);

  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
  cursor:pointer;
  pointer-events:auto;

  transition: transform 0.08s ease, background 0.2s ease, border-color 0.2s ease;
  touch-action: none;
}

#btnDown { left: 16px; }
#btnUp   { right: 16px; }

.mobileBtn:active{
  transform: scale(0.92);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.32);
}

.mobileBtn .btnIcon{
  font-size: 30px;
  font-weight: 900;
  color: #ffffff;
  line-height: 1;
  text-shadow: 0 8px 18px rgba(0, 0, 0, 0.75);
}

/* Hide mobile buttons on desktop */
@media (min-width: 900px){
  .mobileBtn{ display:none; }
}

/* =========================
   FULLSCREEN GAME MODE
========================= */
body.fullscreen-game .topbar,
body.fullscreen-game .panel.left,
body.fullscreen-game .panel.right,
body.fullscreen-game .drawer{
  display: none !important;
}

body.fullscreen-game .app{
  width: 100vw !important;
  max-width: 100vw !important;
  margin: 0 !important;
  padding: 0 !important;
}

body.fullscreen-game .layout{
  display: block !important;
  width: 100vw !important;
  height: 100vh !important;
  padding: 0 !important;
  margin: 0 !important;
}

body.fullscreen-game .gameArea{
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 99999 !important;
  margin: 0 !important;
  padding: 0 !important;
}

body.fullscreen-game .stageWrap{
  width: 100% !important;
  height: 100% !important;
  min-height: 0 !important;
}

body.fullscreen-game .stage{
  width: 100% !important;
  height: 100% !important;
  min-height: 0 !important;
  border-radius: 0 !important;
  border: none !important;
}

body.fullscreen-game #game{
  width: 100% !important;
  height: 100% !important;
  border-radius: 0 !important;
}

body.fullscreen-game{
  overflow: hidden !important;
}

body.fullscreen-game .bg{
  display: none !important; /* optional: improves FPS */
}

body.fullscreen-game .stage{
  background: #000 !important;
}

body.fullscreen-game .overlay{
  backdrop-filter: none !important;
}

/* =========================
   SKIN SELECT (Premium UI)
========================= */
.settingRow{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  margin: 10px 0;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.10);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.07),
    0 14px 40px rgba(0, 0, 0, 0.28);
}
.settingRow span{
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.3px;
  color: rgba(255, 255, 255, 0.90);
}

#skinSelect{
  width: 180px;
  padding: 10px 12px;
  border-radius: 12px;
  outline: none;

  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.2px;

  color: rgba(255, 255, 255, 0.92);
  background: linear-gradient(180deg, rgba(0,0,0,0.75), rgba(0,0,0,0.45));

  border: 1px solid rgba(255, 255, 255, 0.14);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
  transition: 0.2s ease;
  cursor: pointer;
}

#skinSelect:hover,
#skinSelect:focus{
  border-color: rgba(80, 220, 255, 0.55);
  box-shadow:
    0 0 0 3px rgba(80, 220, 255, 0.12),
    0 18px 36px rgba(0, 0, 0, 0.50);
  transform: translateY(-1px);
}

#skinSelect option{
  background: rgba(10, 10, 15, 1);
  color: white;
  font-weight: 700;
}

@media (max-width: 600px){
  #skinSelect{
    width: 150px;
    padding: 9px 10px;
    font-size: 13px;
  }
  .settingRow span{ font-size: 13px; }
}

/* =========================
   Mobile Fullscreen Tip Popup (NO JS)
========================= */
.tipPopupOverlay{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;

  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.tipPopup{
  width: min(92vw, 380px);
  padding: 18px 16px;
  border-radius: 18px;

  background: rgba(15, 18, 30, 0.92);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 18px 60px rgba(0,0,0,0.6);
  text-align: center;
  color: rgba(255,255,255,0.92);
}

.tipPopup h2{
  margin: 0 0 8px;
  font-size: 18px;
  font-weight: 800;
  letter-spacing: 0.4px;
}

.tipPopup p{
  margin: 0 0 14px;
  font-size: 14px;
  line-height: 1.45;
  opacity: 0.95;
}

.tipPopupBtn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 120px;
  padding: 10px 14px;
  border-radius: 14px;

  cursor: pointer;
  user-select: none;

  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.3px;

  background: linear-gradient(180deg, rgba(80,220,255,0.9), rgba(60,130,255,0.9));
  color: #fff;
  box-shadow: 0 12px 30px rgba(60,130,255,0.25);
  transition: transform 0.15s ease;
}

.tipPopupBtn:hover{ transform: translateY(-1px); }

/* Hide checkbox itself */
.tipCloseCheck{ display: none; }

/* actually hide overlay when checked */
.tipPopupOverlay:has(.tipCloseCheck:checked){
  display: none;
}

/* ==========================
   ✅ Mobile ribbons below game
========================== */
.mobileRibbons{
  display:none;
  margin-top:10px;
}

@media (max-width: 768px){
  .mobileRibbons{ display:block; }
}

body.fullscreen-game .mobileRibbons{
  display:none !important;
}

@media (max-width: 768px){
  .gameArea{
    grid-template-rows: auto auto;
  }
  .stageWrap{
    min-height: 0;
  }
}
@media (max-width: 768px) {
  body { overflow-y: auto; overflow-x: hidden; }
}
.stage { height: 62vh; }

@media (min-width: 900px){
  .ribbonControls{
    display:none;
  }
}
/* =========================================================
   MOBILE TOP RIBBON — SINGLE LINE + DARK THEME ✅
   Skin + buttons all in one row
========================================================= */
@media (max-width: 768px){

  /* make top-right section use full width */
  .topRight{
    width: 100%;
    flex-wrap: wrap;
    gap: 10px;
  }

  /* ✅ ribbon becomes one single line bar */
  .ribbonControls{
    width: 100%;
    display: flex;
    flex-direction: row;          /* ✅ single line */
    align-items: center;
    justify-content: space-between;
    gap: 8px;

    padding: 10px 10px;
    border-radius: 18px;

    /* ✅ DARK premium theme */
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(255,255,255,0.10);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);

    box-shadow:
      0 16px 50px rgba(0,0,0,0.55),
      inset 0 1px 0 rgba(255,255,255,0.05);

    /* ✅ force one line */
    flex-wrap: nowrap;
    overflow-x: auto;             /* ✅ if needed, allow horizontal scroll */
    overflow-y: hidden;
    white-space: nowrap;

    scrollbar-width: none;
  }

  .ribbonControls::-webkit-scrollbar{ display:none; }

  /* ✅ make Skin row compact inline */
  .ribbonControls .settingRow{
    display: inline-flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;

    padding: 8px 10px;
    margin: 0;

    border-radius: 16px;

    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);

    flex: 0 0 auto;  /* ✅ don't stretch too much */
  }

  /* hide the "Skin" label on mobile to save space (optional but best) */
  .ribbonControls .settingRow span{
    display: none;
  }

  /* ✅ dark select */
  .ribbonControls #skinSelect{
    height: 40px;
    padding: 0 12px;
    border-radius: 14px;

    font-weight: 900;
    font-size: 14px;

    color: rgba(255,255,255,0.92);
    background: rgba(10,12,22,0.85);

    border: 1px solid rgba(255,255,255,0.14);
    outline: none;

    min-width: 170px;   /* ✅ prevents it becoming tiny */
    max-width: 220px;
  }

  /* ✅ make buttons dark and compact */
  .ribbonControls .ribbonBtn{
    height: 40px;
    padding: 0 12px;
    border-radius: 16px;

    background: rgba(255,255,255,0.04);        /* ✅ dark glass */
    border: 1px solid rgba(255,255,255,0.10);

    color: rgba(255,255,255,0.92);
    font-size: 14px;
    font-weight: 950;

    display: inline-flex;
    align-items: center;
    justify-content: center;

    flex: 0 0 auto;
    box-shadow:
      0 12px 28px rgba(0,0,0,0.50),
      inset 0 1px 0 rgba(255,255,255,0.04);

    transition: transform .12s ease, filter .12s ease, background .12s ease;
  }

  .ribbonControls .ribbonBtn:active{
    transform: scale(0.95);
    filter: brightness(1.15);
  }

  /* ✅ Start button stays special but still dark-premium */
  .ribbonControls .ribbonBtn.primary{
    background: linear-gradient(135deg, rgba(75,123,255,0.92), rgba(35,210,200,0.92));
    color: #061018;
    border: none;

    box-shadow:
      0 14px 34px rgba(35,210,200,0.18),
      0 18px 60px rgba(0,0,0,0.42);
  }

  /* ✅ icon buttons tighter */
  #soundBtn, #restartBtn, #fullscreenBtn{
    width: 42px;
    padding: 0;
    font-size: 18px;
  }

  /* pause readable */
  #pauseBtn{
    font-size: 14px;
    padding: 0 12px;
  }
}
/* ✅ MOBILE ONLY: STOP GAME WINDOW OVERFLOW */
@media (max-width: 900px){

  /* prevent horizontal overflow/side scrolling */
  html, body{
    overflow-x: hidden !important;
    overscroll-behavior: none;
  }

  /* the mobile layout container */
  .app, .layout, .gameArea, .stageWrap{
    max-width: 100vw !important;
    overflow: hidden !important;
  }

  /* ✅ the actual game window */
  #stageContainer{
    width: 100% !important;
    max-width: 100vw !important;
    overflow: hidden !important;
    position: relative;
  }

  /* ✅ canvas must never exceed container */
  #stageContainer canvas#game{
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    max-height: 100% !important;
    display: block;
  }

  /* keep overlays clipped too */
  #overlay,
  .gameRibbonBox{
    max-width: 100% !important;
    overflow: hidden !important;
  }
}
@media (max-width: 900px){
  #btnUp, #btnDown{
    bottom: 20% !important;     /* lift from bottom */
  }
}
/* ✅ Mobile controls: round, transparent, smaller */
@media (max-width: 900px){
  #stageContainer .mobileBtn{
    width: 54px !important;
    height: 54px !important;
    border-radius: 50% !important;

    background: rgba(0,0,0,0.22) !important;   /* transparent */
    border: 1px solid rgba(255,255,255,0.16) !important;

    display: flex !important;
    align-items: center !important;
    justify-content: center !important;

    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    box-shadow: 0 10px 26px rgba(0,0,0,0.28) !important;
  }

  #stageContainer .mobileBtn .btnIcon{
    font-size: 18px !important;
    line-height: 1 !important;
    opacity: 0.92;
  }

  /* nicer tap feel */
  #stageContainer .mobileBtn:active{
    transform: scale(0.96);
  }
}

